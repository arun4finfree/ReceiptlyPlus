const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web-DfrrGca6.js","./vendor-Y7T1HomI.js","./signature-4hWLY5Wy.js","./pdf-qyUACjel.js","./web-DDlsisAG.js","./web-CVvsWwLq.js"])))=>i.map(i=>d[i]);
import{r as ge,a as ne,b as be}from"./vendor-Y7T1HomI.js";import{r as xe}from"./signature-4hWLY5Wy.js";import{_ as oe,h as ye,E as ve}from"./pdf-qyUACjel.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var X={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae;function we(){if(ae)return U;ae=1;var e=ge(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(i,c,d){var f,y={},P=null,C=null;d!==void 0&&(P=""+d),c.key!==void 0&&(P=""+c.key),c.ref!==void 0&&(C=c.ref);for(f in c)s.call(c,f)&&!a.hasOwnProperty(f)&&(y[f]=c[f]);if(i&&i.defaultProps)for(f in c=i.defaultProps,c)y[f]===void 0&&(y[f]=c[f]);return{$$typeof:t,type:i,key:P,ref:C,props:y,_owner:o.current}}return U.Fragment=n,U.jsx=l,U.jsxs=l,U}var se;function Ne(){return se||(se=1,X.exports=we()),X.exports}var r=Ne(),S=ge();const Se=ne(S);var z={},ie;function je(){if(ie)return z;ie=1;var e=be();return z.createRoot=e.createRoot,z.hydrateRoot=e.hydrateRoot,z}var Pe=je();const Ce=ne(Pe);var De=xe();const Te=ne(De),Ee=({isOpen:e,onConfirm:t,onCancel:n})=>{const s=S.useRef(null),[o,a]=S.useState(!1),[l,i]=S.useState({width:400,height:200});S.useEffect(()=>{const v=()=>{const D=window.innerWidth,T=window.innerHeight,w=Math.min(D-80,500),_=Math.min(T*.4,300);i({width:w,height:Math.max(150,_)})};return v(),window.addEventListener("resize",v),window.addEventListener("orientationchange",v),()=>{window.removeEventListener("resize",v),window.removeEventListener("orientationchange",v)}},[]);const c=()=>{s.current&&(s.current.clear(),a(!1))},d=()=>{if(s.current&&!s.current.isEmpty()){const v=s.current.toDataURL("image/png");t(v)}else alert("Please provide a signature before confirming.")},f=()=>{a(!0)},y=()=>{a(!1)},P=v=>{v.preventDefault(),f()},C=v=>{v.preventDefault(),y()};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"bg-blue-600 text-white p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-center",children:"‚úçÔ∏è Add Your Signature"}),r.jsx("p",{className:"text-blue-100 text-sm text-center mt-1",children:"Draw your signature in the box below"})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:r.jsx(Te,{ref:s,canvasProps:{width:l.width,height:l.height,className:"signature-canvas w-full h-full",style:{backgroundColor:"#ffffff",touchAction:"none"}},backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)",minWidth:2,maxWidth:4,velocityFilterWeight:.7,onBegin:f,onEnd:y,onTouchStart:P,onTouchEnd:C})}),r.jsx("div",{className:"mt-3 text-center",children:o?r.jsx("p",{className:"text-blue-600 text-sm",children:"‚úèÔ∏è Drawing..."}):r.jsx("p",{className:"text-gray-500 text-sm",children:"üëÜ Touch and drag to sign"})}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"üì± Mobile Tips:"}),r.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[r.jsx("li",{children:"‚Ä¢ Use your finger or stylus to draw"}),r.jsx("li",{children:"‚Ä¢ Draw slowly for better accuracy"}),r.jsx("li",{children:"‚Ä¢ Clear and redraw if needed"}),r.jsx("li",{children:"‚Ä¢ Signature will be saved as high-quality image"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 flex space-x-3",children:[r.jsx("button",{type:"button",onClick:c,className:"flex-1 bg-gray-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-600 focus:ring-2 focus:ring-gray-500 text-sm",children:"üóëÔ∏è Clear"}),r.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-red-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-600 focus:ring-2 focus:ring-red-500 text-sm",children:"‚ùå Cancel"}),r.jsx("button",{type:"button",onClick:d,className:"flex-1 bg-green-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-600 focus:ring-2 focus:ring-green-500 text-sm",children:"‚úÖ Confirm"})]})]})}):null};/*! Capacitor: https://capacitorjs.com/ - MIT License */const Fe=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},s=(a,l)=>{n.platforms.set(a,l)},o=a=>{n.platforms.has(a)&&(n.currentPlatform=n.platforms.get(a))};return n.addPlatform=s,n.setPlatform=o,n},Oe=e=>e.CapacitorPlatforms=Fe(e),fe=Oe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});fe.addPlatform;fe.setPlatform;var A;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(A||(A={}));class Z extends Error{constructor(t,n,s){super(t),this.message=t,this.code=n,this.data=s}}const Re=e=>{var t,n;return e?.androidBridge?"android":!((n=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},ke=e=>{var t,n,s,o,a;const l=e.CapacitorCustomPlatform||null,i=e.Capacitor||{},c=i.Plugins=i.Plugins||{},d=e.CapacitorPlatforms,f=()=>l!==null?l.name:Re(e),y=((t=d?.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||f,P=()=>y()!=="web",C=((n=d?.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||P,v=p=>{const b=q.get(p);return!!(b?.platforms.has(y())||w(p))},D=((s=d?.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||v,T=p=>{var b;return(b=i.PluginHeaders)===null||b===void 0?void 0:b.find(u=>u.name===p)},w=((o=d?.currentPlatform)===null||o===void 0?void 0:o.getPluginHeader)||T,_=p=>e.console.error(p),J=(p,b,u)=>Promise.reject(`${u} does not have an implementation of "${b}".`),q=new Map,R=(p,b={})=>{const u=q.get(p);if(u)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),u.proxy;const m=y(),g=w(p);let h;const x=async()=>(!h&&m in b?h=typeof b[m]=="function"?h=await b[m]():h=b[m]:l!==null&&!h&&"web"in b&&(h=typeof b.web=="function"?h=await b.web():h=b.web),h),E=(N,j)=>{var O,L;if(g){const M=g?.methods.find(F=>j===F.name);if(M)return M.rtype==="promise"?F=>i.nativePromise(p,j.toString(),F):(F,B)=>i.nativeCallback(p,j.toString(),F,B);if(N)return(O=N[j])===null||O===void 0?void 0:O.bind(N)}else{if(N)return(L=N[j])===null||L===void 0?void 0:L.bind(N);throw new Z(`"${p}" plugin is not implemented on ${m}`,A.Unimplemented)}},k=N=>{let j;const O=(...L)=>{const M=x().then(F=>{const B=E(F,N);if(B){const G=B(...L);return j=G?.remove,G}else throw new Z(`"${p}.${N}()" is not implemented on ${m}`,A.Unimplemented)});return N==="addListener"&&(M.remove=async()=>j()),M};return O.toString=()=>`${N.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:N,writable:!1,configurable:!1}),O},$=k("addListener"),H=k("removeListener"),pe=(N,j)=>{const O=$({eventName:N},j),L=async()=>{const F=await O;H({eventName:N,callbackId:F},j)},M=new Promise(F=>O.then(()=>F({remove:L})));return M.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},M},V=new Proxy({},{get(N,j){switch(j){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?pe:$;case"removeListener":return H;default:return k(j)}}});return c[p]=V,q.set(p,{name:p,proxy:V,platforms:new Set([...Object.keys(b),...g?[m]:[]])}),V},K=((a=d?.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||R;return i.convertFileSrc||(i.convertFileSrc=p=>p),i.getPlatform=y,i.handleError=_,i.isNativePlatform=C,i.isPluginAvailable=D,i.pluginMethodNoop=J,i.registerPlugin=K,i.Exception=Z,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},Le=e=>e.Capacitor=ke(e),Y=Le(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),I=Y.registerPlugin;Y.Plugins;class he{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o);const a=async()=>this.removeListener(t,n),l=Promise.resolve({remove:a});return Object.defineProperty(l,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()}}),l}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n){const s=this.listeners[t];s&&s.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new Y.Exception(t,A.Unimplemented)}unavailable(t="not available"){return new Y.Exception(t,A.Unavailable)}async removeListener(t,n){const s=this.listeners[t];if(!s)return;const o=s.indexOf(n);this.listeners[t].splice(o,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const le=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ce=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Me extends he{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[o,a]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=ce(o).trim(),a=ce(a).trim(),n[o]=a}),n}async setCookie(t){try{const n=le(t.key),s=le(t.value),o=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),l=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${a}; ${l};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}I("CapacitorCookies",{web:()=>new Me});const _e=async e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;t(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(e)}),$e=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(o=>o.toLocaleLowerCase()).reduce((o,a,l)=>(o[a]=e[t[l]],o),{})},Ae=(e,t=!0)=>e?Object.entries(e).reduce((s,o)=>{const[a,l]=o;let i,c;return Array.isArray(l)?(c="",l.forEach(d=>{i=t?encodeURIComponent(d):d,c+=`${a}=${i}&`}),c.slice(0,-1)):(i=t?encodeURIComponent(l):l,c=`${a}=${i}`),`${s}&${c}`},"").substr(1):null,Ie=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=$e(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[l,i]of Object.entries(e.data||{}))a.set(l,i);n.body=a.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((i,c)=>{a.append(c,i)});else for(const i of Object.keys(e.data))a.append(i,e.data[i]);n.body=a;const l=new Headers(n.headers);l.delete("content-type"),n.headers=l}else(o.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class qe extends he{async request(t){const n=Ie(t,t.webFetchExtra),s=Ae(t.params,t.shouldEncodeUrlParams),o=s?`${t.url}?${s}`:t.url,a=await fetch(o,n),l=a.headers.get("content-type")||"";let{responseType:i="text"}=a.ok?t:{};l.includes("application/json")&&(i="json");let c,d;switch(i){case"arraybuffer":case"blob":d=await a.blob(),c=await _e(d);break;case"json":c=await a.json();break;case"document":case"text":default:c=await a.text()}const f={};return a.headers.forEach((y,P)=>{f[P]=y}),{data:c,headers:f,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}I("CapacitorHttp",{web:()=>new qe});var ee;(function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"})(ee||(ee={}));var te;(function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"})(te||(te={}));const Ue=I("Filesystem",{web:()=>oe(()=>import("./web-DfrrGca6.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(e=>new e.FilesystemWeb)}),We=I("Share",{web:()=>oe(()=>import("./web-DDlsisAG.js"),__vite__mapDeps([4,1,2,3]),import.meta.url).then(e=>new e.ShareWeb)}),re=e=>{const t=parseInt(e);if(isNaN(t)||t===0)return"Zero";const n=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],s=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],o=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=["","Thousand","Lakh","Crore"];if(t<10)return n[t];if(t<20)return s[t-10];if(t<100)return o[Math.floor(t/10)]+(t%10?" "+n[t%10]:"");if(t<1e3)return n[Math.floor(t/100)]+" Hundred"+(t%100?" "+re(t%100):"");let l="",i=0,c=t;for(;c>0;){const d=c%1e3;d!==0&&(l=re(d)+(a[i]?" "+a[i]:"")+(l?" "+l:"")),c=Math.floor(c/1e3),i++}return l},W=e=>{if(!e)return"";try{let t;if(e.includes("-")?t=new Date(e+"T00:00:00"):t=new Date(e),isNaN(t.getTime()))return console.error("Invalid date:",e),"";const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=t.getDate(),o=n[t.getMonth()],a=t.getFullYear();return`${s}-${o}-${a}`}catch(t){return console.error("Error formatting date:",e,t),""}},He=e=>{const t=e.amount||"0",n=re(t),s=e.tenantName||"Unknown",o=e.term||"Monthly",a=W(e.durationFrom)||"N/A",l=W(e.durationTo)||"N/A",i=e.paymentMode||"Cash",c=e.referenceNo||"",d=W(e.dateOfTransaction)||W(new Date().toISOString().split("T")[0]);return i==="Cash"?`This is to acknowledge the receipt of <strong>‚Çπ${t}</strong> (<strong>${n} Only</strong>) from <strong>${s}</strong> towards ${o} rent for the period <strong>${a}</strong> to <strong>${l}</strong>, paid via Cash.`:`This is to acknowledge the receipt of <strong>‚Çπ${t}</strong> (<strong>${n} Only</strong>) from <strong>${s}</strong> towards ${o} rent for the period <strong>${a}</strong> to <strong>${l}</strong>, paid via ${i} (${c}) on ${d}.`},Be=async(e,t)=>{try{console.log("Mobile PDF Generation - Form data received:",e),console.log("Mobile PDF Generation - Signature data URL:",t);const n=document.createElement("div");n.id="receipt-content",n.className="p-8 bg-white text-black",n.style.width="210mm",n.style.minHeight="297mm",n.style.fontFamily="Arial, sans-serif",n.style.fontSize="14px",n.style.lineHeight="1.6";const s=He(e),o=W(new Date().toISOString().split("T")[0]);console.log("Mobile PDF Generation - Generated receipt text:",s);const a=e.titleName||"Rental Receipt",l=e.titleAddress||"",i=e.receiptNumber||"RCT-0000-0000";n.innerHTML=`
      <div style="border: 4px double #000; padding: 20px; min-height: 140mm; background: white;">
        <div class="text-center mb-4" style="margin-bottom: 16px;">
          <h1 class="text-3xl font-bold mb-1" style="font-size: 28px; font-weight: bold; margin-bottom: 8px;">
            ${a}
          </h1>
          <p class="text-lg" style="font-size: 16px; color: #666; margin-bottom: 8px;">
            ${l}
          </p>
          <hr style="border: 1px solid #000; margin: 8px 0;">
        </div>
        
        <!-- Invisible table for proper alignment -->
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 24px;">
          <tr>
            <td style="text-align: left; width: 33.33%;">
              <strong>Receipt #:</strong> ${i}
            </td>
            <td style="text-align: center; width: 33.33%;">
              <strong>Payment Receipt</strong>
            </td>
            <td style="text-align: right; width: 33.33%;">
              <strong>Date:</strong> ${o}
            </td>
          </tr>
        </table>
        
        <div class="mb-8" style="margin-bottom: 32px;">
          <p class="text-lg leading-relaxed" style="font-size: 18px; line-height: 1.8; text-align: justify;">
            ${s}
          </p>
        </div>
        
        <div class="mt-16" style="margin-top: 64px;">
          <div style="text-align: right;">
            ${t?`
              <div class="mb-4" style="margin-bottom: 16px;">
                <img src="${t}" alt="Signature" style="max-width: 200px; max-height: 100px; background: white; display: block; margin-left: auto;" />
              </div>
            `:""}
            <div class="border-t-2 border-gray-400 pt-2" style="border-top: 2px solid #9ca3af; padding-top: 8px; width: 200px; margin-left: auto;">
              <span class="text-sm font-medium" style="font-size: 12px; font-weight: 500;">Signature</span>
            </div>
          </div>
        </div>
      </div>
    `,document.body.appendChild(n);const c=await ye(n,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:n.offsetWidth,height:n.offsetHeight,logging:!1,removeContainer:!0}),d=c.toDataURL("image/png"),f=new ve({orientation:"portrait",unit:"mm",format:"a4"}),y=f.internal.pageSize.getWidth(),P=f.internal.pageSize.getHeight(),C=c.width,v=c.height,D=Math.min(y/C,P/v),T=(y-C*D)/2;f.addImage(d,"PNG",T,0,C*D,v*D);const _=`receipt-${e.receiptNumber}.pdf`;return await Ge(f,_),document.body.removeChild(n),!0}catch(n){throw console.error("Mobile PDF Generation Error:",n),new Error("Failed to generate PDF. Please try again.")}},Ge=async(e,t)=>{try{const s=e.output("datauristring").split(",")[1],o=await Ue.writeFile({path:t,data:s,directory:ee.Documents,encoding:te.UTF8});console.log("PDF saved to:",o.uri),await We.share({title:"Receipt PDF",text:"Generated rental receipt",url:o.uri,dialogTitle:"Share Receipt"})}catch(n){console.error("Error saving/sharing PDF:",n),e.save(t)}},Q=e=>{const t=new Date,n=t.getFullYear().toString().slice(-2),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");return`RCT-${n}${s}-${o}${a}`},ze=e=>e?new Date(e).toLocaleDateString("en-GB"):"";var de;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(de||(de={}));var ue;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(ue||(ue={}));const me=I("StatusBar"),Ye=I("SplashScreen",{web:()=>oe(()=>import("./web-CVvsWwLq.js"),__vite__mapDeps([5,1,2,3]),import.meta.url).then(e=>new e.SplashScreenWeb)}),Je=()=>{const[e,t]=S.useState({titleName:"",titleAddress:"",tenantName:"",durationFrom:"",durationTo:"",term:"Monthly",amount:"",dateOfTransaction:new Date().toISOString().split("T")[0],paymentMode:"Cash",referenceNo:"",receiptNumber:"",eSignatureRequired:!1}),[n,s]=S.useState(""),[o,a]=S.useState(!1),[l,i]=S.useState(!1),[c,d]=S.useState(""),[f,y]=S.useState(navigator.onLine),[P,C]=S.useState(null);S.useEffect(()=>{v()},[]);const v=async()=>{try{await Ye.hide(),await me.setStyle({style:"dark"}),await me.setBackgroundColor({color:"#ffffff"}),C({platform:"mobile",userAgent:navigator.userAgent}),console.log("Mobile app initialized successfully")}catch(u){console.error("Error initializing mobile app:",u)}},D=()=>{const u=new Date,m=new Date(u.getFullYear(),u.getMonth()-1,1),g=new Date(u.getFullYear(),u.getMonth(),0),h=m.getFullYear()+"-"+String(m.getMonth()+1).padStart(2,"0")+"-"+String(m.getDate()).padStart(2,"0"),x=g.getFullYear()+"-"+String(g.getMonth()+1).padStart(2,"0")+"-"+String(g.getDate()).padStart(2,"0");return{startDate:h,endDate:x}},T=()=>{const u=new Date,m=new Date(u.getFullYear()-1,u.getMonth(),1),g=new Date(u.getFullYear(),u.getMonth()+1,0),h=m.getFullYear()+"-"+String(m.getMonth()+1).padStart(2,"0")+"-"+String(m.getDate()).padStart(2,"0"),x=g.getFullYear()+"-"+String(g.getMonth()+1).padStart(2,"0")+"-"+String(g.getDate()).padStart(2,"0");return{minDate:h,maxDate:x}};S.useEffect(()=>{parseInt(localStorage.getItem("rental_receipt_seq")||"0");const u=Q(),{startDate:m,endDate:g}=D();t(x=>({...x,receiptNumber:u,durationFrom:m,durationTo:g}));const h=localStorage.getItem("rental_receipt_form_data");if(h)try{const x=JSON.parse(h);t(E=>({...E,...x,receiptNumber:u,dateOfTransaction:new Date().toISOString().split("T")[0],durationFrom:x.durationFrom||m,durationTo:x.durationTo||g}))}catch(x){console.warn("Could not load saved form data:",x)}},[]),S.useEffect(()=>{const u={titleName:e.titleName,titleAddress:e.titleAddress,tenantName:e.tenantName,durationFrom:e.durationFrom,durationTo:e.durationTo,term:e.term,amount:e.amount,paymentMode:e.paymentMode,referenceNo:e.referenceNo,eSignatureRequired:e.eSignatureRequired};localStorage.setItem("rental_receipt_form_data",JSON.stringify(u))},[e]);const w=u=>{const{name:m,value:g,type:h,checked:x}=u.target;if(m==="term"){const{startDate:E,endDate:k}=D();t($=>({...$,[m]:g,durationFrom:E,durationTo:k}));return}t(E=>({...E,[m]:h==="checkbox"?x:g}))},_=()=>{a(!0)},J=u=>{s(u),a(!1),d("Signature captured successfully!"),setTimeout(()=>d(""),3e3)},q=()=>{a(!1)},R=u=>(d(u),window.scrollTo({top:0,behavior:"smooth"}),!1),K=()=>{const m=["titleName","tenantName","durationFrom","durationTo","amount"].filter(H=>!e[H].trim());if(m.length>0)return R(`Please fill in: ${m.join(", ")}`);if(e.paymentMode!=="Cash"&&!e.referenceNo.trim())return R("Reference number is required for non-cash payments.");if(e.eSignatureRequired&&!n)return R("E-signature is required but not provided. Please sign the document.");const{minDate:g,maxDate:h}=T(),x=new Date(e.durationFrom),E=new Date(e.durationTo),k=new Date(g),$=new Date(h);return x<k||x>$?R("Duration From date must be within the allowed range (1 year ago to end of current month)."):E<k||E>$?R("Duration To date must be within the allowed range (1 year ago to end of current month)."):x>E?R("Duration From date cannot be after Duration To date."):!0},p=async()=>{if(K()){i(!0),d("");try{const u={...e,dateOfTransaction:ze(e.dateOfTransaction)};await Be(u,n);const m={id:e.receiptNumber,...u,signatureDataUrl:n,createdAt:new Date().toISOString()},g=JSON.parse(localStorage.getItem("rental_receipts")||"[]");g.push(m),localStorage.setItem("rental_receipts",JSON.stringify(g));const h=Q(0);t(x=>({...x,receiptNumber:h,dateOfTransaction:new Date().toISOString().split("T")[0],amount:"",tenantName:"",durationFrom:"",durationTo:"",referenceNo:""})),s(""),d("Receipt generated and saved successfully!"),setTimeout(()=>d(""),5e3)}catch(u){console.error("Error generating PDF:",u),d("Error generating PDF. Please try again."),setTimeout(()=>d(""),5e3)}finally{i(!1)}}},b=()=>{localStorage.removeItem("rental_receipt_form_data"),localStorage.removeItem("rental_receipts"),localStorage.removeItem("rental_receipt_seq");const{startDate:u,endDate:m}=D(),g=Q();t(h=>({...h,receiptNumber:g,dateOfTransaction:new Date().toISOString().split("T")[0],amount:"",tenantName:"",durationFrom:u,durationTo:m,referenceNo:""})),s(""),d("All data cleared successfully!"),setTimeout(()=>d(""),3e3)};return r.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"üì± ReceiptlyPlus Mobile"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Professional Rental Receipt Generator with E-Signature Support"}),!f&&r.jsx("div",{className:"mt-2 p-2 bg-yellow-100 border border-yellow-400 rounded text-yellow-800 text-xs",children:"‚ö†Ô∏è Offline Mode - Some features may be limited"})]}),c&&r.jsx("div",{className:`mb-6 p-4 rounded-md ${c.includes("Error")||c.includes("Please fill in")||c.includes("required")||c.includes("must be")||c.includes("cannot be")||c.includes("not provided")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:c}),r.jsxs("form",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üìã Receipt Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"titleName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title Name *"}),r.jsx("input",{type:"text",id:"titleName",name:"titleName",value:e.titleName,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",placeholder:"Enter company or person name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"titleAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title Address"}),r.jsx("textarea",{id:"titleAddress",name:"titleAddress",value:e.titleAddress,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",rows:"3",placeholder:"Enter address"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üë§ Tenant Information"}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tenantName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenant Name *"}),r.jsx("input",{type:"text",id:"tenantName",name:"tenantName",value:e.tenantName,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",placeholder:"Enter tenant name",required:!0})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üìÖ Duration & Terms"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"durationFrom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration From *"}),r.jsx("input",{type:"date",id:"durationFrom",name:"durationFrom",value:e.durationFrom,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",min:T().minDate,max:T().maxDate,required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 1 year ago to end of current month"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"durationTo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration To *"}),r.jsx("input",{type:"date",id:"durationTo",name:"durationTo",value:e.durationTo,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",min:T().minDate,max:T().maxDate,required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 1 year ago to end of current month"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"term",className:"block text-sm font-medium text-gray-700 mb-2",children:"Term"}),r.jsxs("select",{id:"term",name:"term",value:e.term,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",children:[r.jsx("option",{value:"Monthly",children:"Monthly"}),r.jsx("option",{value:"Yearly",children:"Yearly"})]})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üí∞ Payment Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (‚Çπ) *"}),r.jsx("input",{type:"number",id:"amount",name:"amount",value:e.amount,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",placeholder:"Enter amount",min:"0",step:"0.01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"paymentMode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",name:"paymentMode",value:e.paymentMode,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",children:[r.jsx("option",{value:"Cash",children:"Cash"}),r.jsx("option",{value:"Cheque",children:"Cheque"}),r.jsx("option",{value:"Bank Deposit",children:"Bank Deposit"}),r.jsx("option",{value:"UPI Payment",children:"UPI Payment"}),r.jsx("option",{value:"Net Banking",children:"Net Banking"})]})]}),e.paymentMode!=="Cash"&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"referenceNo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference No. *"}),r.jsx("input",{type:"text",id:"referenceNo",name:"referenceNo",value:e.referenceNo,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",placeholder:"Enter reference number",required:e.paymentMode!=="Cash"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"dateOfTransaction",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Transaction"}),r.jsx("input",{type:"date",id:"dateOfTransaction",name:"dateOfTransaction",value:e.dateOfTransaction,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"receiptNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),r.jsx("input",{type:"text",id:"receiptNumber",name:"receiptNumber",value:e.receiptNumber,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-base"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"‚úçÔ∏è E-Signature"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:"eSignatureRequired",name:"eSignatureRequired",checked:e.eSignatureRequired,onChange:w,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"eSignatureRequired",className:"text-sm font-medium text-gray-700",children:"E-Signature required"}),e.eSignatureRequired&&r.jsx("button",{type:"button",onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:n?"Update Signature":"Add Signature"})]}),n&&r.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Signature Preview:"}),r.jsx("img",{src:n,alt:"Signature",className:"max-w-full h-20 border border-gray-300 rounded"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("button",{type:"button",onClick:p,disabled:l,className:"w-full bg-green-600 text-white py-4 px-6 rounded-lg font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 focus:ring-2 focus:ring-green-500",children:l?"üì± Generating PDF...":"üìÑ Generate Receipt PDF"}),r.jsx("button",{type:"button",onClick:b,className:"w-full bg-red-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-red-700 focus:ring-2 focus:ring-red-500",children:"üóëÔ∏è Clear All Data"})]})]}),r.jsx(Ee,{isOpen:o,onConfirm:J,onCancel:q})]})};function Ke(){return r.jsx("div",{className:"App",children:r.jsx(Je,{})})}Ce.createRoot(document.getElementById("root")).render(r.jsx(Se.StrictMode,{children:r.jsx(Ke,{})}));export{te as E,he as W,Ie as b};
//# sourceMappingURL=index-BNusX0NZ.js.map
